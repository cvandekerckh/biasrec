{% extends "main/base_rate.html" %}

{% block navbar %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css')}}">
    <nav class="navbar navbar-custom">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <p class = "plabel"><b>UCLMovies</b></p></a>
            </div>
        </div>
    </nav>
    <style>
        .large-text {
            font-size: 20px; 
        }
        .likert-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            margin-left: 300px; /* Marge à gauche */
            margin-right: 300px; /* Marge à droite */
        }
        .likert-point {
            position: relative;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #ccc;
            cursor: pointer;
        }
        .likert-point:hover {
            background-color: black;
        }
        .likert-value {
            position: absolute;
            bottom: -40px; /* Augmenter l'espace par rapport à la ligne inférieure */
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px; /* Augmenter la taille du texte des choix */
            color: green; /* Changer la couleur du texte */
            white-space: nowrap; /* Empêcher le retour à la ligne */
        }
        /* Ajoutez une marge à gauche pour le premier point et une marge à droite pour le dernier point */
        .likert-point:first-child {
            margin-left: 20px;
        }
        .likert-point:last-child {
            margin-right: 20px;
        }
    </style>
    <h1 class="titlecolor"><b>Before concluding the experiment, please answer all the following questions.</b></h1>
{% endblock %}

{% block content %}
    <br>
    <form action="/conclusion" method="post">
        
        <h3 style="margin-left: 50px;"><label for="q1">The movie recommendations were helpful :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q1" name="q1" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q2">I enjoyed the movies recommended by the website :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q2" name="q2" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q3">The movie recommendations were relevant to my cinematic preferences :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q3" name="q3" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q4">The website recommended the genre of movies I like :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q4" name="q4" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q5">The movie recommendations were personalized based on my past interactions (rating phase) :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q5" name="q5" value="5">
        <br><br>
        <br><br>
        <br><br>
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q6">The quality of movie recommendations on this site is satisfactory :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q6" name="q6" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q7">The movies recommended on this website matched my preferences and provided me with a satisfactory purchasing experience :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q7" name="q7" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q8">I enjoyed discovering new movies through the recommendations provided on this website :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q8" name="q8" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q9">The variety of recommended movies was satisfactory for me :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q9" name="q9" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q10">The movie recommendations on this website align with what I would expect from an ideal recommendation service :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q10" name="q10" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q11">Overall, I consider the movie recommendation experience on this website to be positive and satisfactory :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q11" name="q11" value="5">
        <br><br>
        <br><br>
        <br><br>
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q12">The list of movies was varied :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q12" name="q12" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q13">Many movies on the list differed from the other movies on the list :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q13" name="q13" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q14">The recommendation list contained movies of different genres :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q14" name="q14" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q15">The recommendation list contained movies released in different periods or years :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q15" name="q15" value="5">
        <br><br>

        <h3 style="margin-left: 50px;"><label for="q16">The movie recommendations helped broaden my cinematic horizons :</label></h3>
        <div class="likert-scale">
            <div class="likert-point" data-value="-2"><span class="likert-value">Strongly Disagree</span></div>
            <div class="likert-point" data-value="-1"><span class="likert-value">Disagree</span></div>
            <div class="likert-point" data-value="0"><span class="likert-value">Neither</span></div>
            <div class="likert-point" data-value="1"><span class="likert-value">Agree</span></div>
            <div class="likert-point" data-value="2"><span class="likert-value">Strongly Agree</span></div>
        </div>
        <input type="hidden" id="q16" name="q16" value="5">
        <br><br>
        <br><br>
        <br>

        <h3 style="color: rgb(89, 108, 71); text-align: right;">Please submit your answers by clicking on this button :</h3>
        <div style="text-align: right;">
            <input type="submit" value="Submit" class="btn btn-primary btn-lg" style="font-size: 20px;">
        </div>
        <h4 style="text-align: right; color: red;">Make sure to answer all the questions before submitting.</h4>
        <br><br>
    </form>

    <script>    
        const likertScales = document.querySelectorAll('.likert-scale');

        likertScales.forEach(scale => {
            const hiddenInput = scale.nextElementSibling;
            const likertPoints = scale.querySelectorAll('.likert-point');

            likertPoints.forEach(point => {
                point.addEventListener('click', () => {
                    const value = parseInt(point.dataset.value);
                    hiddenInput.value = value;
                    // Change color of points to indicate selection
                    likertPoints.forEach(p => {
                        if (p === point) {
                            p.style.backgroundColor = 'rgb(89, 108, 71)';
                        } else {
                            p.style.backgroundColor = '#ccc';
                        }
                    });
                });
            });
        });

        function validateForm() {
            const hiddenInputs = document.querySelectorAll('input[type="hidden"]');
            for (let i = 0; i < hiddenInputs.length; i++) {
                if (hiddenInputs[i].value === '5') {
                    alert('Please answer all questions before submitting.');
                    return false;
                }
            }
            return true;
        }


        document.querySelector('form').addEventListener('submit', function(event) {
            if (!validateForm()) {
                event.preventDefault();
            } else {
                alert('Your answers have been successfully submitted!');
                window.location.href = "{{ url_for('main.conclusion')}}"; // Redirection vers la page suivante
            }
        });
    </script>
{% endblock %}

